<div class="brutalist-reset">
    <div style="display: flex; justify-content: space-between; align-items: baseline; margin-bottom: var(--space-unit);">
        <h1>suppliers</h1>
        <button>+ new supplier</button>
    </div>

    <!-- Search and Filters - Plain Form -->
    <fieldset style="margin-bottom: var(--space-unit); border: var(--border-width) solid rgb(var(--color-border)); padding: var(--space-unit);">
        <legend>search & filters</legend>
        
        <div style="display: grid; gap: var(--space-unit); grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
            <!-- Search -->
            <div>
                <label for="search">search:</label><br>
                <input
                    type="text"
                    id="search"
                    [ngModel]="searchQuery()"
                    (ngModelChange)="onSearchQueryChange($event)"
                    [placeholder]="vectorSearchEnabled() ? 'AI search: capabilities, expertise...' : keywordSearchEnabled() ? 'Full-text search: company name, description...' : 'company name, code...'"
                    style="width: 100%;">

                <!-- Search Type Toggles -->
                <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                    <label>
                        <input
                            type="checkbox"
                            [checked]="vectorSearchEnabled()"
                            (change)="toggleVectorSearch()">
                        ai search
                    </label>
                    <label>
                        <input
                            type="checkbox"
                            [checked]="keywordSearchEnabled()"
                            (change)="toggleKeywordSearch()">
                        full-text search
                    </label>
                </div>
            </div>
            
            <!-- Country Filter -->
            <div [style.opacity]="vectorSearchEnabled() || keywordSearchEnabled() ? '0.5' : '1'">
                <label for="country">country:</label><br>
                <select
                    id="country"
                    [ngModel]="filters().country"
                    (ngModelChange)="onCountryInputChange($event)"
                    [disabled]="vectorSearchEnabled() || keywordSearchEnabled()"
                    style="width: 100%;">
                    <option value="">all countries</option>
                    @for (country of countries(); track country) {
                    <option [value]="country">{{ country.toLowerCase() }}</option>
                    }
                </select>
                @if (vectorSearchEnabled()) {
                <span style="font-size: 0.8rem; color: rgb(var(--color-text-muted));">(disabled in ai mode)</span>
                }
                @if (keywordSearchEnabled()) {
                <span style="font-size: 0.8rem; color: rgb(var(--color-text-muted));">(disabled in full-text mode)</span>
                }
            </div>

            <!-- Rating Filter -->
            <div [style.opacity]="vectorSearchEnabled() || keywordSearchEnabled() ? '0.5' : '1'">
                <label for="rating">min rating:</label><br>
                <select
                    id="rating"
                    [ngModel]="filters().minRating"
                    (ngModelChange)="onRatingInputChange($event)"
                    [disabled]="vectorSearchEnabled() || keywordSearchEnabled()"
                    style="width: 100%;">
                    <option value="">any rating</option>
                    <option value="1">1+ stars</option>
                    <option value="2">2+ stars</option>
                    <option value="3">3+ stars</option>
                    <option value="4">4+ stars</option>
                    <option value="5">5 stars</option>
                </select>
                @if (vectorSearchEnabled()) {
                <span style="font-size: 0.8rem; color: rgb(var(--color-text-muted));">(disabled in ai mode)</span>
                }
                @if (keywordSearchEnabled()) {
                <span style="font-size: 0.8rem; color: rgb(var(--color-text-muted));">(disabled in full-text mode)</span>
                }
            </div>

            <!-- Status Filter -->
            <div [style.opacity]="vectorSearchEnabled() || keywordSearchEnabled() ? '0.5' : '1'">
                <label for="status">status:</label><br>
                <select
                    id="status"
                    [ngModel]="filters().isActive"
                    (ngModelChange)="onStatusInputChange($event)"
                    [disabled]="vectorSearchEnabled() || keywordSearchEnabled()"
                    style="width: 100%;">
                    <option value="">all status</option>
                    <option value="active">active</option>
                    <option value="inactive">inactive</option>
                </select>
                @if (vectorSearchEnabled()) {
                <span style="font-size: 0.8rem; color: rgb(var(--color-text-muted));">(disabled in ai mode)</span>
                }
                @if (keywordSearchEnabled()) {
                <span style="font-size: 0.8rem; color: rgb(var(--color-text-muted));">(disabled in full-text mode)</span>
                }
            </div>
        </div>
        
        <div style="margin-top: var(--space-unit); text-align: right;">
            <button (click)="clearFilters()" type="button">clear filters</button>
        </div>
    </fieldset>

    @if (loading()) {
    <p class="loading" style="text-align: center; margin: var(--space-unit) 0;">loading suppliers...</p>
    }

    @if (error()) {
    <p style="color: rgb(var(--color-accent)); margin: var(--space-unit) 0;">error: {{ error() }}</p>
    }

    @if (!loading() && !error()) {
    <!-- Data Grid - Minimal styling -->
    <div class="data-grid" style="height: 600px; margin-bottom: var(--space-unit);">
        <ag-grid-angular 
            [rowData]="suppliers()" 
            [columnDefs]="columnDefs" 
            [defaultColDef]="defaultColDef"
            [theme]="gridTheme" 
            [rowSelection]="'single'" 
            [animateRows]="false" 
            [domLayout]="'normal'"
            (gridReady)="onGridReady($event)" 
            (rowClicked)="onRowClicked($event)"
            (cellValueChanged)="onCellValueChanged($event)" 
            class="ag-theme-alpine w-full h-full">
        </ag-grid-angular>
    </div>

    <!-- Pagination - Plain Text -->
    @if (totalPages() > 1) {
    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: var(--space-unit);">
        <p>
            showing {{ (currentPage() - 1) * pageSize() + 1 }} to {{ Math.min(currentPage() * pageSize(), totalCount()) }} of {{ totalCount() }} results
        </p>
        
        <div style="display: flex; gap: 1rem; align-items: center;">
            <button (click)="onPageChange(currentPage() - 1)" [disabled]="!hasPrevPage()">← prev</button>
            
            @for (page of getPageNumbers(); track page) {
            <button 
                (click)="onPageChange(page)"
                [style]="page === currentPage() ? 'color: rgb(var(--color-accent)); text-decoration: underline;' : ''">
                {{ page }}
            </button>
            }
            
            <button (click)="onPageChange(currentPage() + 1)" [disabled]="!hasNextPage()">next →</button>
        </div>
    </div>
    }
    }
</div>